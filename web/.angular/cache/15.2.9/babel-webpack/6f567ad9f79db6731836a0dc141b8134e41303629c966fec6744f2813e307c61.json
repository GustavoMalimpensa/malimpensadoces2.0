{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, ViewChild } from '@angular/core';\nlet ProductsComponent = class ProductsComponent {\n  constructor(modalService, carrinhoService, router) {\n    this.modalService = modalService;\n    this.carrinhoService = carrinhoService;\n    this.router = router;\n    this.categories = ['bolo', 'cone_trufado', 'bolo_pote'];\n    this.filteredProducts = [];\n    this.selectedCategory = '*';\n    this.precoTotal = 0;\n    this.itenTotal = 0;\n    this.cancelarClicado = false;\n    this.carrinho = [];\n    this.title = '';\n    this.quantidadeSelecionada = 1; // Inicialmente, a quantidade é 1\n    this.showSearchBar = false;\n    this.allProducts = [{\n      id: 1,\n      category: 'bolo',\n      name: 'Bolo de Morango',\n      description: 'Pedaços de morando com leite ninho, massa feita com farinha integral',\n      imageUrl: './assets/img/bolodedepote.jpeg',\n      keywords: 'morango',\n      price: 12.00\n    }, {\n      id: 2,\n      category: 'trufa',\n      name: 'Trufa Recheada',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolofatia.jpeg',\n      keywords: 'chocolate',\n      price: 15.00\n    }, {\n      id: 3,\n      category: 'bolo_pote',\n      name: 'Bolo com uva',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/cone.jpeg',\n      keywords: 'uva',\n      price: 16.00\n    }, {\n      id: 4,\n      category: 'cone_trufado',\n      name: 'Bolo de Morango',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolodedepote.jpeg',\n      keywords: 'morango',\n      price: 12.00\n    }, {\n      id: 5,\n      category: 'bolo',\n      name: 'Trufa Recheada',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolofatia.jpeg',\n      keywords: 'morango',\n      price: 15.00\n    }, {\n      id: 6,\n      category: 'cone_trufado',\n      name: 'Bolo com uva',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/cone.jpeg',\n      keywords: 'morango',\n      price: 16.00\n    }, {\n      id: 7,\n      category: 'cone_trufado',\n      name: 'Bolo de Morango',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolodedepote.jpeg',\n      keywords: 'morango',\n      price: 12.00\n    }, {\n      id: 8,\n      category: 'bolo',\n      name: 'Trufa Recheada',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolofatia.jpeg',\n      keywords: 'morango',\n      price: 15.00\n    }, {\n      id: 9,\n      category: 'cone_trufado',\n      name: 'Bolo com uva',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/cone.jpeg',\n      keywords: 'morango',\n      price: 16.00\n    }, {\n      id: 10,\n      category: 'bolo_pote',\n      name: 'Bolo de Morango',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolodedepote.jpeg',\n      keywords: 'morango',\n      price: 12.00\n    }, {\n      id: 11,\n      category: 'bolo_pote',\n      name: 'Trufa Recheada',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolofatia.jpeg',\n      keywords: 'morango',\n      price: 15.00\n    }, {\n      id: 12,\n      category: 'bolo_pote',\n      name: 'Bolo com uva',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/cone.jpeg',\n      keywords: 'morango',\n      price: 16\n    }, {\n      id: 13,\n      category: 'bolo_pote',\n      name: 'Bolo de Morango',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolodedepote.jpeg',\n      keywords: 'morango',\n      price: 12\n    }, {\n      id: 14,\n      category: 'bolo_pote',\n      name: 'Trufa Recheada',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolofatia.jpeg',\n      keywords: 'morango',\n      price: 15\n    }, {\n      id: 15,\n      category: 'bolo_pote',\n      name: 'Bolo com uva',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/cone.jpeg',\n      keywords: 'morango',\n      price: 16\n    }, {\n      id: 16,\n      category: 'cone_trufado',\n      name: 'Bolo com uva',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/cone.jpeg',\n      keywords: 'morango',\n      price: 16\n    }, {\n      id: 17,\n      category: 'bolo',\n      name: 'Bolo de Morango',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolodedepote.jpeg',\n      keywords: 'morango',\n      price: 12\n    }, {\n      id: 18,\n      category: 'bolo',\n      name: 'Trufa Recheada',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolofatia.jpeg',\n      keywords: 'morango',\n      price: 15\n    }, {\n      id: 19,\n      category: 'cone_trufado',\n      name: 'Bolo com uva',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/cone.jpeg',\n      keywords: 'morango',\n      price: 16\n    }, {\n      id: 20,\n      category: 'bolo',\n      name: 'Bolo de Morango',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolodedepote.jpeg',\n      keywords: 'morango',\n      price: 12\n    }, {\n      id: 21,\n      category: 'bolo',\n      name: 'Trufa Recheada',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolofatia.jpeg',\n      keywords: 'morango',\n      price: 15\n    }, {\n      id: 22,\n      category: 'cone_trufado',\n      name: 'Bolo com uva',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/cone.jpeg',\n      keywords: 'morango',\n      price: 16\n    }, {\n      id: 23,\n      category: 'bolo',\n      name: 'Bolo de Morango',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolodedepote.jpeg',\n      keywords: 'morango',\n      price: 12\n    }, {\n      id: 24,\n      category: 'trufa',\n      name: 'Trufa Recheada',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolofatia.jpeg',\n      keywords: 'morango',\n      price: 15\n    }, {\n      id: 25,\n      category: 'bolo',\n      name: 'Bolo com uva',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/cone.jpeg',\n      keywords: 'morango',\n      price: 16\n    }, {\n      id: 26,\n      category: 'trufa',\n      name: 'Trufa Recheada',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolofatia.jpeg',\n      keywords: 'morango',\n      price: 15\n    }, {\n      id: 27,\n      category: 'cone_trufado',\n      name: 'Bolo com uva',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/cone.jpeg',\n      keywords: 'morango',\n      price: 16\n    }\n    // Adicione outros produtos fictícios aqui\n    ];\n\n    this.carrinho = []; // Inicialize a variável carrinho aqui\n  }\n\n  ngOnInit() {\n    this.loadProducts();\n  }\n  filterProducts(category) {\n    this.selectedCategory = category;\n    this.filteredProducts = category === '*' ? this.allProducts : this.allProducts.filter(product => product.category === category);\n  }\n  //filtrar por pesquisa\n  loadProducts() {\n    // Inicialmente, exiba todos os produtos\n    this.filteredProducts = this.allProducts;\n  }\n  //modal para detalhes do produto\n  abrirModalDetalhesProduto(product) {\n    this.produtoDetalhado = product;\n    this.modalRef = this.modalService.show(this.modalDetalhesProduto);\n  }\n  fecharModalDetalhesProduto() {\n    this.modalRef?.hide();\n  }\n  adicionarAoCarrinho(produto) {\n    const itemNoCarrinho = this.getCarrinhoItem(produto);\n    if (itemNoCarrinho) {\n      // Se o produto já estiver no carrinho, atualize a quantidade com base na quantidade selecionada\n      itemNoCarrinho.quantidade += this.quantidadeSelecionada;\n    } else {\n      // Se o produto não estiver no carrinho, crie um novo item no carrinho com a quantidade selecionada\n      const newItem = {\n        ...produto,\n        quantidade: this.quantidadeSelecionada\n      };\n      this.carrinho.push(newItem);\n    }\n    // Limpe a quantidade selecionada\n    this.quantidadeSelecionada = 1;\n    // Feche o modal após adicionar ao carrinho\n    this.modalRef?.hide();\n    // Atualize o preço total do carrinho\n    this.itenTotal = this.calcularItenTotal();\n    this.precoTotal = this.calcularPrecoTotal();\n    this.carrinhoService.adicionarProdutoAoCarrinho(produto);\n  }\n  aumentarQuantidade() {\n    this.quantidadeSelecionada++;\n  }\n  diminuirQuantidade() {\n    if (this.quantidadeSelecionada > 1) {\n      this.quantidadeSelecionada--;\n    }\n  }\n  //modal finalizar compra\n  openModal(buttonNumber) {\n    this.title = 'Carrinho';\n    this.cancelarClicado = false;\n    this.modalRef = this.modalService.show(this.modalTemplate);\n  }\n  removerDoCarrinho(item) {\n    if (item.quantidade === 1) {\n      const index = this.carrinho.findIndex(i => i.id === item.id);\n      if (index !== -1) {\n        this.carrinho.splice(index, 1);\n      }\n    } else {\n      item.quantidade--;\n    }\n    this.itenTotal = this.calcularItenTotal();\n    this.precoTotal = this.calcularPrecoTotal();\n  }\n  limparCarrinho() {\n    this.carrinho = [];\n  }\n  calcularItenTotal() {\n    return this.carrinho.reduce((total, item) => total + item.quantidade, 0);\n  }\n  calcularPrecoTotal() {\n    return this.carrinho.reduce((total, item) => total + item.price * item.quantidade, 0);\n  }\n  getCarrinhoItem(product) {\n    return this.carrinho.find(item => item.id === product.id);\n  }\n  estaNoCarrinho(product) {\n    return this.carrinho.some(item => item.id === product.id);\n  }\n  finalizarCompra() {\n    this.modalRef?.hide();\n    this.router.navigate(['/pedido']);\n  }\n};\n__decorate([ViewChild('modalTemplate')], ProductsComponent.prototype, \"modalTemplate\", void 0);\n__decorate([ViewChild('modalDetalhesProduto')], ProductsComponent.prototype, \"modalDetalhesProduto\", void 0);\nProductsComponent = __decorate([Component({\n  selector: 'app-products',\n  templateUrl: './products.component.html',\n  styleUrls: ['./products.component.css']\n})], ProductsComponent);\nexport { ProductsComponent };","map":{"version":3,"mappings":"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","names":["Component","ViewChild","ProductsComponent","constructor","modalService","carrinhoService","router","id","category","name","description","imageUrl","keywords","price","carrinho","ngOnInit","loadProducts","filterProducts","selectedCategory","filteredProducts","allProducts","filter","product","abrirModalDetalhesProduto","produtoDetalhado","modalRef","show","modalDetalhesProduto","fecharModalDetalhesProduto","hide","adicionarAoCarrinho","produto","itemNoCarrinho","getCarrinhoItem","quantidade","quantidadeSelecionada","newItem","push","itenTotal","calcularItenTotal","precoTotal","calcularPrecoTotal","adicionarProdutoAoCarrinho","aumentarQuantidade","diminuirQuantidade","openModal","buttonNumber","title","cancelarClicado","modalTemplate","removerDoCarrinho","item","index","findIndex","i","splice","limparCarrinho","reduce","total","find","estaNoCarrinho","some","finalizarCompra","navigate","__decorate","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["C:\\Users\\gumal\\OneDrive\\Área de Trabalho\\malimpensa\\src\\app\\user\\products\\products.component.ts"],"sourcesContent":["import { Component, ViewChild } from '@angular/core';\nimport { BsModalService, BsModalRef } from 'ngx-bootstrap/modal';\nimport { CarrinhoService } from '../../services/carrinho.service';\nimport { Product } from 'src/app/models/product';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-products',\n  templateUrl: './products.component.html',\n  styleUrls: ['./products.component.css']\n})\nexport class ProductsComponent {\n\n  categories: string[] = ['bolo', 'cone_trufado', 'bolo_pote'];\n  filteredProducts: Product[] = [];\n  selectedCategory: string = '*';\n  precoTotal: number = 0;\n  itenTotal: number = 0;\n  cancelarClicado: boolean = false;\n  carrinho: any[] = [];\n  modalRef?: BsModalRef;\n  title: string = '';\n  produtoDetalhado: any;\n  quantidadeSelecionada: number = 1; // Inicialmente, a quantidade é 1\n  showSearchBar: boolean = false;\n\n  allProducts: Product[] = [\n    {\n      id: 1,\n      category: 'bolo',\n      name: 'Bolo de Morango',\n      description: 'Pedaços de morando com leite ninho, massa feita com farinha integral',\n      imageUrl: './assets/img/bolodedepote.jpeg',\n      keywords: 'morango',\n      price: 12.00,\n    },\n    {\n      id: 2,\n      category: 'trufa',\n      name: 'Trufa Recheada',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolofatia.jpeg',\n      keywords: 'chocolate',\n      price: 15.00,\n    },\n    {\n      id: 3,\n      category: 'bolo_pote',\n      name: 'Bolo com uva',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/cone.jpeg',\n      keywords: 'uva',\n      price: 16.00,\n    },\n    {\n      id: 4,\n      category: 'cone_trufado',\n      name: 'Bolo de Morango',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolodedepote.jpeg',\n      keywords: 'morango',\n      price: 12.00,\n    },\n    {\n      id: 5,\n      category: 'bolo',\n      name: 'Trufa Recheada',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolofatia.jpeg',\n      keywords: 'morango',\n      price: 15.00,\n    },\n    {\n      id: 6,\n      category: 'cone_trufado',\n      name: 'Bolo com uva',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/cone.jpeg',\n      keywords: 'morango',\n      price: 16.00,\n    },\n    {\n      id: 7,\n      category: 'cone_trufado',\n      name: 'Bolo de Morango',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolodedepote.jpeg',\n      keywords: 'morango',\n      price: 12.00,\n    },\n    {\n      id: 8,\n      category: 'bolo',\n      name: 'Trufa Recheada',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolofatia.jpeg',\n      keywords: 'morango',\n      price: 15.00,\n    },\n    {\n      id: 9,\n      category: 'cone_trufado',\n      name: 'Bolo com uva',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/cone.jpeg',\n      keywords: 'morango',\n      price: 16.00,\n    },\n    {\n      id: 10,\n      category: 'bolo_pote',\n      name: 'Bolo de Morango',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolodedepote.jpeg',\n      keywords: 'morango',\n      price: 12.00,\n    },\n    {\n      id: 11,\n      category: 'bolo_pote',\n      name: 'Trufa Recheada',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolofatia.jpeg',\n      keywords: 'morango',\n      price: 15.00,\n    },\n    {\n      id: 12,\n      category: 'bolo_pote',\n      name: 'Bolo com uva',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/cone.jpeg',\n      keywords: 'morango',\n      price: 16,\n    },\n    {\n      id: 13,\n      category: 'bolo_pote',\n      name: 'Bolo de Morango',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolodedepote.jpeg',\n      keywords: 'morango',\n      price: 12,\n    },\n    {\n      id: 14,\n      category: 'bolo_pote',\n      name: 'Trufa Recheada',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolofatia.jpeg',\n      keywords: 'morango',\n      price: 15,\n    },\n    {\n      id: 15,\n      category: 'bolo_pote',\n      name: 'Bolo com uva',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/cone.jpeg',\n      keywords: 'morango',\n      price: 16,\n    },\n    {\n      id: 16,\n      category: 'cone_trufado',\n      name: 'Bolo com uva',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/cone.jpeg',\n      keywords: 'morango',\n      price: 16,\n    },\n    {\n      id: 17,\n      category: 'bolo',\n      name: 'Bolo de Morango',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolodedepote.jpeg',\n      keywords: 'morango',\n      price: 12,\n    },\n    {\n      id: 18,\n      category: 'bolo',\n      name: 'Trufa Recheada',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolofatia.jpeg',\n      keywords: 'morango',\n      price: 15,\n    },\n    {\n      id: 19,\n      category: 'cone_trufado',\n      name: 'Bolo com uva',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/cone.jpeg',\n      keywords: 'morango',\n      price: 16,\n    },\n    {\n      id: 20,\n      category: 'bolo',\n      name: 'Bolo de Morango',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolodedepote.jpeg',\n      keywords: 'morango',\n      price: 12,\n    },\n    {\n      id: 21,\n      category: 'bolo',\n      name: 'Trufa Recheada',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolofatia.jpeg',\n      keywords: 'morango',\n      price: 15,\n    },\n    {\n      id: 22,\n      category: 'cone_trufado',\n      name: 'Bolo com uva',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/cone.jpeg',\n      keywords: 'morango',\n      price: 16,\n    },\n    {\n      id: 23,\n      category: 'bolo',\n      name: 'Bolo de Morango',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolodedepote.jpeg',\n      keywords: 'morango',\n      price: 12,\n    },\n    {\n      id: 24,\n      category: 'trufa',\n      name: 'Trufa Recheada',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolofatia.jpeg',\n      keywords: 'morango',\n      price: 15,\n    },\n    {\n      id: 25,\n      category: 'bolo',\n      name: 'Bolo com uva',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/cone.jpeg',\n      keywords: 'morango',\n      price: 16,\n    },\n    {\n      id: 26,\n      category: 'trufa',\n      name: 'Trufa Recheada',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolofatia.jpeg',\n      keywords: 'morango',\n      price: 15,\n    },\n    {\n      id: 27,\n      category: 'cone_trufado',\n      name: 'Bolo com uva',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/cone.jpeg',\n      keywords: 'morango',\n      price: 16,\n    },\n    // Adicione outros produtos fictícios aqui\n  ];\n  \n\n  constructor(\n    private modalService: BsModalService,\n    private carrinhoService: CarrinhoService,\n    private router: Router,\n  ) {\n    this.carrinho = []; // Inicialize a variável carrinho aqui\n  }\n\n  ngOnInit(): void {\n    this.loadProducts();\n  }\n\n  filterProducts(category: string) {\n    this.selectedCategory = category;\n    this.filteredProducts = category === '*' ?\n      this.allProducts :\n      this.allProducts.filter(product => product.category === category);\n  }\n\n  //filtrar por pesquisa\n\n  loadProducts() {\n    // Inicialmente, exiba todos os produtos\n    this.filteredProducts = this.allProducts;\n  }\n\n  //modal para detalhes do produto\n\n  abrirModalDetalhesProduto(product: any) {\n    this.produtoDetalhado = product;\n    this.modalRef = this.modalService.show(this.modalDetalhesProduto);\n  }\n  \n  fecharModalDetalhesProduto() {\n    this.modalRef?.hide();\n  }\n\n  adicionarAoCarrinho(produto: Product) {\n    const itemNoCarrinho = this.getCarrinhoItem(produto);\n  \n    if (itemNoCarrinho) {\n      // Se o produto já estiver no carrinho, atualize a quantidade com base na quantidade selecionada\n      itemNoCarrinho.quantidade += this.quantidadeSelecionada;\n    } else {\n      // Se o produto não estiver no carrinho, crie um novo item no carrinho com a quantidade selecionada\n      const newItem = { ...produto, quantidade: this.quantidadeSelecionada };\n      this.carrinho.push(newItem);\n    }\n  \n    // Limpe a quantidade selecionada\n    this.quantidadeSelecionada = 1;\n  \n    // Feche o modal após adicionar ao carrinho\n    this.modalRef?.hide();\n  \n    // Atualize o preço total do carrinho\n    this.itenTotal = this.calcularItenTotal();\n    this.precoTotal = this.calcularPrecoTotal();\n    this.carrinhoService.adicionarProdutoAoCarrinho(produto);\n  }\n\n  aumentarQuantidade() {\n    this.quantidadeSelecionada++;\n  }\n\n  diminuirQuantidade() {\n    if (this.quantidadeSelecionada > 1) {\n      this.quantidadeSelecionada--;\n    }\n  }\n\n  //modal finalizar compra\n  \n  openModal(buttonNumber: number) {\n    this.title = 'Carrinho';\n    this.cancelarClicado = false;\n    this.modalRef = this.modalService.show(this.modalTemplate);\n  }\n  \n  \n  removerDoCarrinho(item: any) {\n    if (item.quantidade === 1) {\n      const index = this.carrinho.findIndex((i) => i.id === item.id);\n      if (index !== -1) {\n        this.carrinho.splice(index, 1);\n      }\n    } else {\n      item.quantidade--;\n    }\n  \n    this.itenTotal = this.calcularItenTotal();\n    this.precoTotal = this.calcularPrecoTotal();\n  }\n\n  limparCarrinho() {\n    this.carrinho = [];\n  }\n  \n  calcularItenTotal(): number {\n    return this.carrinho.reduce((total, item) => total + item.quantidade, 0);\n  }\n\n  calcularPrecoTotal(): number {\n    return this.carrinho.reduce((total, item) => total + item.price * item.quantidade, 0);\n  }\n\n  getCarrinhoItem(product: Product) {\n    return this.carrinho.find((item) => item.id === product.id);\n  }\n\n  estaNoCarrinho(product: Product): boolean {\n    return this.carrinho.some((item) => item.id === product.id);\n  }\n\n  finalizarCompra() {\n    this.modalRef?.hide();\n    this.router.navigate(['/pedido']);\n  }\n  \n  @ViewChild('modalTemplate') modalTemplate!: string;\n\n  @ViewChild('modalDetalhesProduto') modalDetalhesProduto!: string;\n\n  \n  \n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n  "]},"metadata":{},"sourceType":"module","externalDependencies":[]}