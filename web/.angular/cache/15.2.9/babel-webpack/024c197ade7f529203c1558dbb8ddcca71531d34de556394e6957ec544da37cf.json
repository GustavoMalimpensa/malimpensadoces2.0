{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"ngx-bootstrap/modal\";\nimport * as i2 from \"src/services/ProductService\";\nimport * as i3 from \"@angular/common\";\nconst _c0 = [\"modalTemplate\"];\nfunction ProductsComponent_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵelement(1, \"img\", 11);\n    i0.ɵɵelementStart(2, \"h2\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const product_r5 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", product_r5.imageUrl, i0.ɵɵsanitizeUrl);\n    i0.ɵɵpropertyInterpolate(\"alt\", product_r5.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r5.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r5.description);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Pre\\u00E7o: R$ \", product_r5.price, \"\");\n  }\n}\nfunction ProductsComponent_ng_template_15_div_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵelement(1, \"img\", 11);\n    i0.ɵɵelementStart(2, \"h3\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"button\", 22);\n    i0.ɵɵlistener(\"click\", function ProductsComponent_ng_template_15_div_7_Template_button_click_6_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r9);\n      const item_r7 = restoredCtx.$implicit;\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.removeFromCart(item_r7));\n    });\n    i0.ɵɵtext(7, \"Remover\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const item_r7 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate(\"src\", item_r7.product.imageUrl, i0.ɵɵsanitizeUrl);\n    i0.ɵɵpropertyInterpolate(\"alt\", item_r7.product.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r7.product.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Pre\\u00E7o: R$ \", item_r7.product.price, \"\");\n  }\n}\nfunction ProductsComponent_ng_template_15_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 12)(1, \"h4\", 13);\n    i0.ɵɵtext(2, \"Carrinho de Compras\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function ProductsComponent_ng_template_15_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.closeCartModal());\n    });\n    i0.ɵɵelementStart(4, \"span\", 15);\n    i0.ɵɵtext(5, \"\\u00D7\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(6, \"div\", 16);\n    i0.ɵɵtemplate(7, ProductsComponent_ng_template_15_div_7_Template, 8, 4, \"div\", 17);\n    i0.ɵɵelementStart(8, \"p\");\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"div\", 18)(11, \"button\", 19);\n    i0.ɵɵlistener(\"click\", function ProductsComponent_ng_template_15_Template_button_click_11_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.closeCartModal());\n    });\n    i0.ɵɵtext(12, \"Continuar Comprando\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"button\", 20);\n    i0.ɵɵlistener(\"click\", function ProductsComponent_ng_template_15_Template_button_click_13_listener() {\n      i0.ɵɵrestoreView(_r11);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.checkout());\n    });\n    i0.ɵɵtext(14, \"Finalizar Compra\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.cart);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Total: R$ \", ctx_r2.calculateTotal(), \"\");\n  }\n}\nfunction ProductsComponent_div_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 23);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.successMessage, \"\\n\");\n  }\n}\nfunction ProductsComponent_div_18_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 24);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r4.errorMessage, \"\\n\");\n  }\n}\nexport class ProductsComponent {\n  constructor(modalService, ProductService // Injete o serviço aqui\n  ) {\n    this.modalService = modalService;\n    this.ProductService = ProductService;\n    // Defina suas categorias aqui\n    this.categories = ['Categoria 1', 'Categoria 2', 'Categoria 3'];\n    this.filteredProducts = []; // Array para armazenar produtos filtrados\n    this.allProducts = []; // Array para armazenar todos os produtos\n    // Carrinho de compras\n    this.cart = [];\n    this.successMessage = ''; // Mensagem de sucesso\n    this.errorMessage = ''; // Mensagem de erro\n    this.Product = {\n      category: '',\n      name: '',\n      content: '',\n      price: '',\n      user_id: '1' // Certifique-se de definir o user_id conforme necessário\n    };\n  }\n\n  ngOnInit() {\n    // Carregue todos os produtos ao inicializar o componente\n    this.loadProducts();\n  }\n  filterProducts(category) {\n    // Filtrar produtos com base na categoria selecionada\n    this.filteredProducts = this.allProducts.filter(product => product.category === category);\n  }\n  loadProducts() {\n    // Chame o serviço para carregar todos os produtos\n    this.ProductService.getAllProducts().subscribe(products => {\n      this.allProducts = products;\n      // Inicialmente, exiba todos os produtos\n      this.filteredProducts = this.allProducts;\n    });\n  }\n  openModal(buttonNumber) {\n    this.title = `Comprar produtos`;\n    this.modalRef = this.modalService.show(this.modalTemplate);\n  }\n  comprar() {\n    this.ProductService.comprar(this.Product).subscribe(response => {\n      console.log('Product comprado com sucesso:', response);\n      this.successMessage = 'Product comprado com sucesso.';\n      this.errorMessage = ''; // Limpa qualquer mensagem de erro anterior\n      // Lógica adicional após o Product bem-sucedido, se necessário\n      // Lógica adicional após o Product bem-sucedido, se necessário\n    }, error => {\n      console.error('Erro ao comprar o Product:', error);\n      this.errorMessage = 'Erro ao comprar o produto. Tente novamente.';\n      this.successMessage = ''; // Limpa qualquer mensagem de sucesso anterior\n      // Lógica de tratamento de erro, se necessário\n    });\n  }\n}\n\nProductsComponent.ɵfac = function ProductsComponent_Factory(t) {\n  return new (t || ProductsComponent)(i0.ɵɵdirectiveInject(i1.BsModalService), i0.ɵɵdirectiveInject(i2.ProductService));\n};\nProductsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProductsComponent,\n  selectors: [[\"app-products\"]],\n  viewQuery: function ProductsComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.modalTemplate = _t.first);\n    }\n  },\n  decls: 19,\n  vars: 3,\n  consts: [[1, \"header\"], [1, \"categories\"], [3, \"click\"], [1, \"products\"], [\"class\", \"product\", 4, \"ngFor\", \"ngForOf\"], [1, \"btn\", \"btn-primary\", \"mb-3\"], [1, \"btn\", \"btn-primary\", \"btn-block\", 3, \"click\"], [\"cartModal\", \"\"], [\"class\", \"alert alert-success\", 4, \"ngIf\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [1, \"product\"], [3, \"src\", \"alt\"], [1, \"modal-header\", \"bg-primary\", \"text-white\"], [1, \"modal-title\", \"pull-left\"], [\"type\", \"button\", \"aria-label\", \"Close\", 1, \"btn-close\", \"close\", \"pull-right\", 3, \"click\"], [\"aria-hidden\", \"true\", 1, \"visually-hidden\"], [1, \"modal-body\"], [\"class\", \"cart-item\", 4, \"ngFor\", \"ngForOf\"], [1, \"modal-footer\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", 3, \"click\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", 3, \"click\"], [1, \"cart-item\"], [1, \"btn\", \"btn-danger\", 3, \"click\"], [1, \"alert\", \"alert-success\"], [1, \"alert\", \"alert-danger\"]],\n  template: function ProductsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\");\n      i0.ɵɵtext(2, \"Minha Loja de Produtos\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 1)(4, \"button\", 2);\n      i0.ɵɵlistener(\"click\", function ProductsComponent_Template_button_click_4_listener() {\n        return ctx.filterProducts(\"Categoria 1\");\n      });\n      i0.ɵɵtext(5, \"Categoria 1\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(6, \"button\", 2);\n      i0.ɵɵlistener(\"click\", function ProductsComponent_Template_button_click_6_listener() {\n        return ctx.filterProducts(\"Categoria 2\");\n      });\n      i0.ɵɵtext(7, \"Categoria 2\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"button\", 2);\n      i0.ɵɵlistener(\"click\", function ProductsComponent_Template_button_click_8_listener() {\n        return ctx.filterProducts(\"Categoria 3\");\n      });\n      i0.ɵɵtext(9, \"Categoria 3\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(10, \"div\", 3);\n      i0.ɵɵtemplate(11, ProductsComponent_div_11_Template, 8, 5, \"div\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"div\", 5)(13, \"button\", 6);\n      i0.ɵɵlistener(\"click\", function ProductsComponent_Template_button_click_13_listener() {\n        return ctx.openModal(1);\n      });\n      i0.ɵɵtext(14, \"carrinho\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(15, ProductsComponent_ng_template_15_Template, 15, 2, \"ng-template\", null, 7, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtemplate(17, ProductsComponent_div_17_Template, 2, 1, \"div\", 8);\n      i0.ɵɵtemplate(18, ProductsComponent_div_18_Template, 2, 1, \"div\", 9);\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(11);\n      i0.ɵɵproperty(\"ngForOf\", ctx.filteredProducts);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", ctx.successMessage);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","ProductsComponent","constructor","modalService","ProductService","category","name","content","price","user_id","ngOnInit","loadProducts","filterProducts","filteredProducts","allProducts","filter","product","getAllProducts","subscribe","products","openModal","buttonNumber","title","modalRef","show","modalTemplate","comprar","Product","response","console","log","successMessage","errorMessage","error","selectors","viewQuery","ctx"],"sourceRoot":"","sources":["C:\\Users\\gumal\\OneDrive\\Área de Trabalho\\malimpens2.0\\web\\src\\app\\user\\products\\products.component.html","C:\\Users\\gumal\\OneDrive\\Área de Trabalho\\malimpens2.0\\web\\src\\app\\user\\products\\products.component.ts"],"sourcesContent":["<!-- products.component.html -->\n\n<div class=\"header\">\n  <h1>Minha Loja de Produtos</h1>\n  <div class=\"categories\">\n    <button (click)=\"filterProducts('Categoria 1')\">Categoria 1</button>\n    <button (click)=\"filterProducts('Categoria 2')\">Categoria 2</button>\n    <button (click)=\"filterProducts('Categoria 3')\">Categoria 3</button>\n  </div>\n</div>\n\n<div class=\"products\">\n  <div *ngFor=\"let product of filteredProducts\" class=\"product\">\n    <img src=\"{{ product.imageUrl }}\" alt=\"{{ product.name }}\">\n    <h2>{{ product.name }}</h2>\n    <p>{{ product.description }}</p>\n    <p>Preço: R$ {{ product.price }}</p>\n  </div>\n</div>\n\n<div class=\"btn btn-primary mb-3\">\n    <button class=\"btn btn-primary btn-block\" (click)=\"openModal(1)\">carrinho</button>\n</div>\n\n<!-- Modal para o carrinho -->\n<ng-template #cartModal>\n  <div class=\"modal-header bg-primary text-white\">\n    <h4 class=\"modal-title pull-left\">Carrinho de Compras</h4>\n    <button type=\"button\" class=\"btn-close close pull-right\" aria-label=\"Close\" (click)=\"closeCartModal()\">\n      <span aria-hidden=\"true\" class=\"visually-hidden\">&times;</span>\n    </button>\n  </div>\n  <div class=\"modal-body\">\n    <div *ngFor=\"let item of cart\" class=\"cart-item\">\n      <img src=\"{{ item.product.imageUrl }}\" alt=\"{{ item.product.name }}\">\n      <h3>{{ item.product.name }}</h3>\n      <p>Preço: R$ {{ item.product.price }}</p>\n      <button class=\"btn btn-danger\" (click)=\"removeFromCart(item)\">Remover</button>\n    </div>\n    <p>Total: R$ {{ calculateTotal() }}</p>\n  </div>\n  <div class=\"modal-footer\">\n    <button type=\"button\" class=\"btn btn-secondary\" (click)=\"closeCartModal()\">Continuar Comprando</button>\n    <button type=\"button\" class=\"btn btn-primary\" (click)=\"checkout()\">Finalizar Compra</button>\n  </div>\n</ng-template>\n\n<div class=\"alert alert-success\" *ngIf=\"successMessage\">\n    {{ successMessage }}\n</div>\n  \n<div class=\"alert alert-danger\" *ngIf=\"errorMessage\">\n    {{ errorMessage }}\n</div>\n  \n  ","import { Component, ViewChild } from '@angular/core';\nimport { BsModalService, BsModalRef } from 'ngx-bootstrap/modal';\nimport { ProductService } from 'src/services/ProductService';\n\n@Component({\n  selector: 'app-products',\n  templateUrl: './products.component.html',\n  styleUrls: ['./products.component.css']\n})\nexport class ProductsComponent {\n\n  // Defina suas categorias aqui\n  categories: string[] = ['Categoria 1', 'Categoria 2', 'Categoria 3'];\n  filteredProducts: any[] = []; // Array para armazenar produtos filtrados\n  allProducts: any[] = []; // Array para armazenar todos os produtos\n\n  // Carrinho de compras\n  cart: any[] = [];\n  \n  modalRef?: BsModalRef;\n  title: any;\n  successMessage: string = ''; // Mensagem de sucesso\n  errorMessage: string = '';   // Mensagem de erro\n  Product: any = {\n    category: '',\n    name: '',\n    content: '',\n    price: '',\n    user_id: '1', // Certifique-se de definir o user_id conforme necessário\n  };\n\n  constructor(\n    private modalService: BsModalService,\n    private ProductService: ProductService // Injete o serviço aqui\n  ) {}\n\n  ngOnInit(): void {\n    // Carregue todos os produtos ao inicializar o componente\n    this.loadProducts();\n  }\n\n  filterProducts(category: string) {\n    // Filtrar produtos com base na categoria selecionada\n    this.filteredProducts = this.allProducts.filter((product) => product.category === category);\n  }\n\n  loadProducts() {\n    // Chame o serviço para carregar todos os produtos\n    this.ProductService.getAllProducts().subscribe((products) => {\n      this.allProducts = products;\n      // Inicialmente, exiba todos os produtos\n      this.filteredProducts = this.allProducts;\n    });\n  }\n\n  openModal(buttonNumber: number) {\n    this.title = `Comprar produtos`;\n    this.modalRef = this.modalService.show(this.modalTemplate);\n  }\n\n  comprar() {\n    this.ProductService.comprar(this.Product).subscribe(\n      (response) => {\n        console.log('Product comprado com sucesso:', response);\n        this.successMessage = 'Product comprado com sucesso.';\n        this.errorMessage = ''; // Limpa qualquer mensagem de erro anterior\n        // Lógica adicional após o Product bem-sucedido, se necessário\n        // Lógica adicional após o Product bem-sucedido, se necessário\n      },\n      (error) => {\n        console.error('Erro ao comprar o Product:', error);\n        this.errorMessage = 'Erro ao comprar o produto. Tente novamente.';\n        this.successMessage = ''; // Limpa qualquer mensagem de sucesso anterior\n        // Lógica de tratamento de erro, se necessário\n      }\n    );\n  }\n  \n  @ViewChild('modalTemplate') modalTemplate!: string;\n}\n\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}