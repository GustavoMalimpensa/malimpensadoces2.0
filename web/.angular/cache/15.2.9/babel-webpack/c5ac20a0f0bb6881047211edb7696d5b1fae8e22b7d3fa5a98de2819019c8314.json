{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"ngx-bootstrap/modal\";\nimport * as i2 from \"src/app/services/product.service\";\nconst _c0 = [\"modalAdicionarProduct\"];\nconst _c1 = [\"modalEditarProduto\"];\nconst _c2 = [\"modalDeletarProduto\"];\nexport class ProductsComponent {\n  constructor(modalService, ProductService) {\n    this.modalService = modalService;\n    this.ProductService = ProductService;\n    this.categories = ['bolo_pote', 'cone_trufado', 'bolo', 'pudim'];\n    this.filteredProducts = [];\n    this.allProducts = [];\n    this.selectedCategory = '*';\n    this.cancelarClicado = false;\n    this.title = '';\n    this.successMessage = '';\n    this.errorMessage = '';\n    this.showDeleteConfirmationModal = false;\n    this.newProduct = {\n      category: '',\n      name: '',\n      content: '',\n      price: '',\n      file: '',\n      user_id: '1'\n    };\n  }\n  ngOnInit() {\n    this.loadProducts();\n  }\n  //filtrar por pesquisa\n  filterProducts(category) {\n    // Filtrar produtos com base na categoria selecionada\n    this.filteredProducts = this.allProducts.filter(product => product.category === category);\n    this.selectedCategory = category;\n    if (category === '*') {\n      // Se a categoria for '*' (Todos), não aplique nenhum filtro\n      this.filteredProducts = this.allProducts;\n    } else {\n      // Caso contrário, filtre os produtos com base na categoria selecionada\n      this.filteredProducts = this.allProducts.filter(product => product.category === category);\n    }\n  }\n  //Carregando produtos\n  loadProducts() {\n    this.ProductService.getAllProducts().subscribe(products => {\n      this.allProducts = products; // Forçar a tipagem para um array\n      // Inicialmente, exiba todos os produtos\n      this.filteredProducts = this.allProducts;\n    });\n  }\n  //Adicionar Produto\n  addProduct() {\n    // Certifique-se de que this.newProduct contém as informações do produto\n    this.ProductService.addProducts(this.newProduct).subscribe(() => {\n      console.log('Produto adicionado com sucesso.');\n      this.successMessage = 'Produto cadastrado com sucesso!';\n      this.errorMessage = ''; // Limpar a mensagem de erro, se houver\n      this.newProduct = {}; // Limpar o objeto newProduct\n      this.loadProducts(); // Recarregar a lista de produtos\n    }, error => {\n      console.error('Erro ao adicionar produto:', error);\n      this.successMessage = ''; // Limpar a mensagem de sucesso, se houver\n      this.errorMessage = 'Falha ao cadastrar o produto.';\n    });\n  }\n  //modal para editar o produto\n  abrirmodalEditarProduto(product) {\n    this.produtoDetalhado = product;\n    this.modalRef = this.modalService.show(this.modalEditarProduto);\n  }\n  fecharmodalEditarProduto() {\n    this.modalRef?.hide();\n  }\n  //modal adicionar produto\n  adicionarProduto(buttonNumber) {\n    this.cancelarClicado = false;\n    this.modalRef = this.modalService.show(this.modalAdicionarProduct);\n  }\n  //modal confirmar deletar produto\n  confirmarDeletarProduto(buttonNumber) {\n    this.title = `Excluir Produto?`;\n    this.modalRef = this.modalService.show(this.modalDeletarProduto);\n  }\n  modalDeleteProduct(productId) {\n    this.productToDeleteId = productId;\n    this.showDeleteConfirmationModal = false;\n  }\n  deleteProduct(productId) {\n    this.ProductService.deleteProducts(productId).subscribe(() => {\n      console.log('Produto excluído com sucesso.');\n      this.loadProducts(); // Recarregar a lista de produtos após a exclusão\n      this.showDeleteConfirmationModal = false; // Fechar o modal após a exclusão\n      this.successMessage = 'Produto excluído com sucesso!';\n      this.errorMessage = ''; // Limpar a mensagem de erro, se houver\n    }, error => {\n      console.error('Erro ao excluir produto:', error);\n      this.showDeleteConfirmationModal = false; // Fechar o modal em caso de erro\n      this.successMessage = ''; // Limpar a mensagem de sucesso, se houver\n      this.errorMessage = 'Falha ao excluir o produto.';\n    });\n    this.productToDeleteId = productId;\n    this.showDeleteConfirmationModal = true;\n  }\n  updateImagePreview(event) {\n    if (event.target.files && event.target.files[0]) {\n      const reader = new FileReader();\n      reader.onload = e => {\n        this.newProduct.file = e.target.result;\n      };\n      reader.readAsDataURL(event.target.files[0]);\n    }\n  }\n  cancelDelete() {\n    this.productToDeleteId = undefined; // Limpar o ID do produto a ser excluído\n    this.showDeleteConfirmationModal = false; // Fechar o modal\n  }\n}\n\nProductsComponent.ɵfac = function ProductsComponent_Factory(t) {\n  return new (t || ProductsComponent)(i0.ɵɵdirectiveInject(i1.BsModalService), i0.ɵɵdirectiveInject(i2.ProductService));\n};\nProductsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProductsComponent,\n  selectors: [[\"app-products\"]],\n  viewQuery: function ProductsComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n      i0.ɵɵviewQuery(_c1, 5);\n      i0.ɵɵviewQuery(_c2, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.modalAdicionarProduct = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.modalEditarProduto = _t.first);\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.modalDeletarProduto = _t.first);\n    }\n  },\n  decls: 7,\n  vars: 0,\n  consts: [[1, \"container\"], [1, \"modal\", \"fade\"], [\"modalAdicionarProduct\", \"\"], [\"modalEditarProduto\", \"\"], [\"modalDeletarProduto\", \"\"]],\n  template: function ProductsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelement(0, \"div\", 0)(1, \"div\", 1, 2)(3, \"div\", 1, 3)(5, \"div\", 1, 4);\n    }\n  },\n  styles: [\".header[_ngcontent-%COMP%] {\\r\\n    text-align: center;\\r\\n    margin-bottom: 30px; \\r\\n    }\\r\\n    \\r\\n    .categories[_ngcontent-%COMP%] {\\r\\n    list-style: none;\\r\\n    padding: 0;\\r\\n    display: flex;\\r\\n    justify-content: center;\\r\\n    border-bottom: 1px solid #dee2e6; \\r\\n    flex-wrap: wrap; \\r\\n    }\\r\\n    \\r\\n    .categories[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\\r\\n    margin-right: 20px; \\r\\n    position: relative;\\r\\n    flex: 1; \\r\\n    max-width: 150px; \\r\\n    text-align: center;\\r\\n    }\\r\\n    \\r\\n    .categories[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\\r\\n    color: #252525;\\r\\n    font-size: 16px; \\r\\n    line-height: 20px;\\r\\n    font-weight: 600;\\r\\n    text-transform: capitalize;\\r\\n    padding: 15px 0;\\r\\n    position: relative;\\r\\n    white-space: nowrap; \\r\\n    overflow: hidden;\\r\\n    text-overflow: ellipsis; \\r\\n    }\\r\\n    \\r\\n    \\r\\n    .categories[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]::before {\\r\\n    content: \\\"\\\";\\r\\n    position: absolute;\\r\\n    left: 0;\\r\\n    bottom: 0;\\r\\n    background: #FF9400;\\r\\n    width: 100%;\\r\\n    height: 2px;\\r\\n    transition: width 0.4s;\\r\\n    }\\r\\n    \\r\\n    \\r\\n    .categories[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover::before {\\r\\n    width: 0;\\r\\n    }\\r\\n    \\r\\n    \\r\\n    .categories[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%] {\\r\\n    color: #FF9400;\\r\\n    }\\r\\n    \\r\\n    \\r\\n    @media screen and (max-width: 768px) {\\r\\n    .categories[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\\r\\n        font-size: 14px; \\r\\n    }\\r\\n    \\r\\n    \\r\\n    .categories[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]::before {\\r\\n        content: \\\"\\\";\\r\\n        position: absolute;\\r\\n        left: 0;\\r\\n        bottom: 0;\\r\\n        background: #FF9400;\\r\\n        width: 100%;\\r\\n        height: 2px;\\r\\n        transition: width 0.4s;\\r\\n    }\\r\\n    }\\r\\n      \\r\\n    \\r\\n    \\r\\n    \\r\\n    .conteiner[_ngcontent-%COMP%]{\\r\\n        margin-top: 110px;\\r\\n    }\\r\\n    \\r\\n    .card[_ngcontent-%COMP%] {\\r\\n        border: none;\\r\\n        outline: none;\\r\\n        background-color: floralwhite;\\r\\n        border-radius: 20px;\\r\\n        margin-right: 20px; \\r\\n        flex: 0 0 calc(33.333% - 20px); \\r\\n    }\\r\\n    \\r\\n    .card[_ngcontent-%COMP%]:hover{\\r\\n        transform: translate(-15px);\\r\\n        transition: transform .3s;\\r\\n    \\r\\n    }\\r\\n    \\r\\n    .text1[_ngcontent-%COMP%] {\\r\\n        font-size:  13px;\\r\\n        color: cadetblue;\\r\\n    }\\r\\n    \\r\\n    .info[_ngcontent-%COMP%] {\\r\\n        line-height: 17px;\\r\\n    }\\r\\n    \\r\\n    .start[_ngcontent-%COMP%] {\\r\\n        color: firebrick;\\r\\n    }\\r\\n    \\r\\n    .cost[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\r\\n        color: seagreen;\\r\\n    }\\r\\n    \\r\\n    \\r\\n    @media screen and (max-width: 768px) {\\r\\n        .card[_ngcontent-%COMP%] {\\r\\n            flex-basis: calc(33.333% - 20px); \\r\\n        }\\r\\n    \\r\\n        \\r\\n        .card[_ngcontent-%COMP%]:hover {\\r\\n            transform: none;\\r\\n        }\\r\\n    \\r\\n        .text1[_ngcontent-%COMP%] {\\r\\n            font-size: 12px; \\r\\n        }\\r\\n    }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcGFnZXMvYWRtaW4vcHJvZHVjdHMvcHJvZHVjdHMuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxnQ0FBZ0M7QUFDaEM7SUFDSSxrQkFBa0I7SUFDbEIsbUJBQW1CLEVBQUUseUJBQXlCO0lBQzlDOztJQUVBO0lBQ0EsZ0JBQWdCO0lBQ2hCLFVBQVU7SUFDVixhQUFhO0lBQ2IsdUJBQXVCO0lBQ3ZCLGdDQUFnQyxFQUFFLG1CQUFtQjtJQUNyRCxlQUFlLEVBQUUseUVBQXlFO0lBQzFGOztJQUVBO0lBQ0Esa0JBQWtCLEVBQUUsaUNBQWlDO0lBQ3JELGtCQUFrQjtJQUNsQixPQUFPLEVBQUUsa0RBQWtEO0lBQzNELGdCQUFnQixFQUFFLCtCQUErQjtJQUNqRCxrQkFBa0I7SUFDbEI7O0lBRUE7SUFDQSxjQUFjO0lBQ2QsZUFBZSxFQUFFLDhDQUE4QztJQUMvRCxpQkFBaUI7SUFDakIsZ0JBQWdCO0lBQ2hCLDBCQUEwQjtJQUMxQixlQUFlO0lBQ2Ysa0JBQWtCO0lBQ2xCLG1CQUFtQixFQUFFLHVEQUF1RDtJQUM1RSxnQkFBZ0I7SUFDaEIsdUJBQXVCLEVBQUUscURBQXFEO0lBQzlFOztJQUVBLDJDQUEyQztJQUMzQztJQUNBLFdBQVc7SUFDWCxrQkFBa0I7SUFDbEIsT0FBTztJQUNQLFNBQVM7SUFDVCxtQkFBbUI7SUFDbkIsV0FBVztJQUNYLFdBQVc7SUFDWCxzQkFBc0I7SUFDdEI7O0lBRUEsNENBQTRDO0lBQzVDO0lBQ0EsUUFBUTtJQUNSOztJQUVBLCtCQUErQjtJQUMvQjtJQUNBLGNBQWM7SUFDZDs7SUFFQSxpRUFBaUU7SUFDakU7SUFDQTtRQUNJLGVBQWUsRUFBRSxvREFBb0Q7SUFDekU7O0lBRUEsOENBQThDO0lBQzlDO1FBQ0ksV0FBVztRQUNYLGtCQUFrQjtRQUNsQixPQUFPO1FBQ1AsU0FBUztRQUNULG1CQUFtQjtRQUNuQixXQUFXO1FBQ1gsV0FBVztRQUNYLHNCQUFzQjtJQUMxQjtJQUNBOztJQUVBLCtCQUErQjs7O0lBRy9CO1FBQ0ksaUJBQWlCO0lBQ3JCOztJQUVBO1FBQ0ksWUFBWTtRQUNaLGFBQWE7UUFDYiw2QkFBNkI7UUFDN0IsbUJBQW1CO1FBQ25CLGtCQUFrQixFQUFFLCtCQUErQjtRQUNuRCw4QkFBOEIsRUFBRSx3Q0FBd0M7SUFDNUU7O0lBRUE7UUFDSSwyQkFBMkI7UUFDM0IseUJBQXlCOztJQUU3Qjs7SUFFQTtRQUNJLGdCQUFnQjtRQUNoQixnQkFBZ0I7SUFDcEI7O0lBRUE7UUFDSSxpQkFBaUI7SUFDckI7O0lBRUE7UUFDSSxnQkFBZ0I7SUFDcEI7O0lBRUE7UUFDSSxlQUFlO0lBQ25COztJQUVBLG9DQUFvQztJQUNwQztRQUNJO1lBQ0ksZ0NBQWdDLEVBQUUsNENBQTRDO1FBQ2xGOztRQUVBLDRFQUE0RTtRQUM1RTtZQUNJLGVBQWU7UUFDbkI7O1FBRUE7WUFDSSxlQUFlLEVBQUUsOENBQThDO1FBQ25FO0lBQ0oiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBFc3RpbGl6YcODwqfDg8KjbyBwYXJhIG9zIGZpbHRyb3MgKi9cclxuLmhlYWRlciB7XHJcbiAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICBtYXJnaW4tYm90dG9tOiAzMHB4OyAvKiBFc3Bhw4PCp2FtZW50byBpbmZlcmlvciAqL1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAuY2F0ZWdvcmllcyB7XHJcbiAgICBsaXN0LXN0eWxlOiBub25lO1xyXG4gICAgcGFkZGluZzogMDtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgIGJvcmRlci1ib3R0b206IDFweCBzb2xpZCAjZGVlMmU2OyAvKiBMaW5oYSBpbmZlcmlvciAqL1xyXG4gICAgZmxleC13cmFwOiB3cmFwOyAvKiBQZXJtaXRpciBxdWUgb3MgZmlsdHJvcyBxdWVicmVtIHBhcmEgdW1hIG5vdmEgbGluaGEgZW0gdGVsYXMgbWVub3JlcyAqL1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAuY2F0ZWdvcmllcyBsaSB7XHJcbiAgICBtYXJnaW4tcmlnaHQ6IDIwcHg7IC8qIEVzcGHDg8KnYW1lbnRvIGVudHJlIG9zIGZpbHRyb3MgKi9cclxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgIGZsZXg6IDE7IC8qIERpc3RyaWJ1aXIgZXNwYcODwqdvIGlndWFsbWVudGUgZW50cmUgb3MgZmlsdHJvcyAqL1xyXG4gICAgbWF4LXdpZHRoOiAxNTBweDsgLyogTGFyZ3VyYSBtw4PCoXhpbWEgZG9zIGZpbHRyb3MgKi9cclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLmNhdGVnb3JpZXMgYSB7XHJcbiAgICBjb2xvcjogIzI1MjUyNTtcclxuICAgIGZvbnQtc2l6ZTogMTZweDsgLyogVGFtYW5obyBkZSBmb250ZSBtZW5vciBwYXJhIHRlbGFzIG1lbm9yZXMgKi9cclxuICAgIGxpbmUtaGVpZ2h0OiAyMHB4O1xyXG4gICAgZm9udC13ZWlnaHQ6IDYwMDtcclxuICAgIHRleHQtdHJhbnNmb3JtOiBjYXBpdGFsaXplO1xyXG4gICAgcGFkZGluZzogMTVweCAwO1xyXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsgLyogSW1wZWRpciBxdWUgbyB0ZXh0byBzZWphIHF1ZWJyYWRvIGVtIHbDg8KhcmlhcyBsaW5oYXMgKi9cclxuICAgIG92ZXJmbG93OiBoaWRkZW47XHJcbiAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsgLyogQWRpY2lvbmFyIHJldGljw4PCqm5jaWFzIHNlIG8gdGV4dG8gZm9yIG11aXRvIGxvbmdvICovXHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qIExpbmhhIGluZmVyaW9yIHF1ZSBzZWd1ZSBvIHRleHRvIGF0aXZvICovXHJcbiAgICAuY2F0ZWdvcmllcyBhLmFjdGl2ZTo6YmVmb3JlIHtcclxuICAgIGNvbnRlbnQ6IFwiXCI7XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICBsZWZ0OiAwO1xyXG4gICAgYm90dG9tOiAwO1xyXG4gICAgYmFja2dyb3VuZDogI0ZGOTQwMDtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgaGVpZ2h0OiAycHg7XHJcbiAgICB0cmFuc2l0aW9uOiB3aWR0aCAwLjRzO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKiBFZmVpdG8gZGUgbGFyZ3VyYSBkYSBsaW5oYSBxdWFuZG8gaG92ZXIgKi9cclxuICAgIC5jYXRlZ29yaWVzIGE6aG92ZXI6OmJlZm9yZSB7XHJcbiAgICB3aWR0aDogMDtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyogRXN0aWxvIHBhcmEgbyBmaWx0cm8gYXRpdm8gKi9cclxuICAgIC5jYXRlZ29yaWVzIGEuYWN0aXZlIHtcclxuICAgIGNvbG9yOiAjRkY5NDAwO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKiBNZWRpYSBxdWVyeSBwYXJhIGFqdXN0YXIgbyB0YW1hbmhvIGRhIGZvbnRlIGVtIHRlbGFzIG1lbm9yZXMgKi9cclxuICAgIEBtZWRpYSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDc2OHB4KSB7XHJcbiAgICAuY2F0ZWdvcmllcyBhIHtcclxuICAgICAgICBmb250LXNpemU6IDE0cHg7IC8qIFRhbWFuaG8gZGUgZm9udGUgYWluZGEgbWVub3IgcGFyYSB0ZWxhcyBtZW5vcmVzICovXHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qIFJlbW92ZXIgYSBsaW5oYSBpbmZlcmlvciBlbSB0ZWxhcyBtZW5vcmVzICovXHJcbiAgICAuY2F0ZWdvcmllcyBhLmFjdGl2ZTo6YmVmb3JlIHtcclxuICAgICAgICBjb250ZW50OiBcIlwiO1xyXG4gICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgICAgICBsZWZ0OiAwO1xyXG4gICAgICAgIGJvdHRvbTogMDtcclxuICAgICAgICBiYWNrZ3JvdW5kOiAjRkY5NDAwO1xyXG4gICAgICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgICAgIGhlaWdodDogMnB4O1xyXG4gICAgICAgIHRyYW5zaXRpb246IHdpZHRoIDAuNHM7XHJcbiAgICB9XHJcbiAgICB9XHJcbiAgICAgIFxyXG4gICAgLypmaW0gZGEgZXN0aWxpemHDg8Knw4PCo28gZG8gZmlsdHJvKi9cclxuICAgIFxyXG4gICAgXHJcbiAgICAuY29udGVpbmVye1xyXG4gICAgICAgIG1hcmdpbi10b3A6IDExMHB4O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAuY2FyZCB7XHJcbiAgICAgICAgYm9yZGVyOiBub25lO1xyXG4gICAgICAgIG91dGxpbmU6IG5vbmU7XHJcbiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogZmxvcmFsd2hpdGU7XHJcbiAgICAgICAgYm9yZGVyLXJhZGl1czogMjBweDtcclxuICAgICAgICBtYXJnaW4tcmlnaHQ6IDIwcHg7IC8qIEVzcGHDg8KnYW1lbnRvIGVudHJlIG9zIGNhcmRzICovXHJcbiAgICAgICAgZmxleDogMCAwIGNhbGMoMzMuMzMzJSAtIDIwcHgpOyAvKiBUYW1hbmhvIGRvcyBjYXJkcyBwYXJhIHRyw4PCqnMgY29sdW5hcyAqL1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAuY2FyZDpob3ZlcntcclxuICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtMTVweCk7XHJcbiAgICAgICAgdHJhbnNpdGlvbjogdHJhbnNmb3JtIC4zcztcclxuICAgIFxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAudGV4dDEge1xyXG4gICAgICAgIGZvbnQtc2l6ZTogIDEzcHg7XHJcbiAgICAgICAgY29sb3I6IGNhZGV0Ymx1ZTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLmluZm8ge1xyXG4gICAgICAgIGxpbmUtaGVpZ2h0OiAxN3B4O1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAuc3RhcnQge1xyXG4gICAgICAgIGNvbG9yOiBmaXJlYnJpY2s7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC5jb3N0IHNwYW4ge1xyXG4gICAgICAgIGNvbG9yOiBzZWFncmVlbjtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyogTWVkaWEgcXVlcnkgcGFyYSB0ZWxhcyBwZXF1ZW5hcyAqL1xyXG4gICAgQG1lZGlhIHNjcmVlbiBhbmQgKG1heC13aWR0aDogNzY4cHgpIHtcclxuICAgICAgICAuY2FyZCB7XHJcbiAgICAgICAgICAgIGZsZXgtYmFzaXM6IGNhbGMoMzMuMzMzJSAtIDIwcHgpOyAvKiBQYXJhIG1hbnRlciAzIGNvbHVuYXMgZW0gdGVsYXMgcGVxdWVuYXMgKi9cclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAvKiBBanVzdGUgYSBsYXJndXJhIGUgbyBlc3Bhw4PCp2FtZW50byBjb25mb3JtZSBuZWNlc3PDg8KhcmlvIHBhcmEgdGVsYXMgbWVub3JlcyAqL1xyXG4gICAgICAgIC5jYXJkOmhvdmVyIHtcclxuICAgICAgICAgICAgdHJhbnNmb3JtOiBub25lO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIC50ZXh0MSB7XHJcbiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDsgLyogVGFtYW5obyBkZSBmb250ZSBtZW5vciBwYXJhIHRlbGFzIG1lbm9yZXMgKi9cclxuICAgICAgICB9XHJcbiAgICB9Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":";;;;;;AAUA,OAAM,MAAOA,iBAAiB;EAuB5BC,YACUC,YAA4B,EAC5BC,cAA8B;IAD9B,iBAAY,GAAZD,YAAY;IACZ,mBAAc,GAAdC,cAAc;IAxBxB,eAAU,GAAa,CAAC,WAAW,EAAE,cAAc,EAAE,MAAM,EAAE,OAAO,CAAC;IACrE,qBAAgB,GAAW,EAAE;IAC7B,gBAAW,GAAU,EAAE;IACvB,qBAAgB,GAAW,GAAG;IAC9B,oBAAe,GAAY,KAAK;IAEhC,UAAK,GAAW,EAAE;IAElB,mBAAc,GAAW,EAAE;IAC3B,iBAAY,GAAW,EAAE;IAEzB,gCAA2B,GAAG,KAAK;IAEnC,eAAU,GAAQ;MAChBC,QAAQ,EAAE,EAAE;MACZC,IAAI,EAAE,EAAE;MACRC,OAAO,EAAE,EAAE;MACXC,KAAK,EAAE,EAAE;MACTC,IAAI,EAAE,EAAE;MACRC,OAAO,EAAE;KACV;EAKE;EAEHC,QAAQ;IACN,IAAI,CAACC,YAAY,EAAE;EACrB;EAEA;EAEAC,cAAc,CAACR,QAAgB;IAC7B;IACA,IAAI,CAACS,gBAAgB,GAAG,IAAI,CAACC,WAAW,CAACC,MAAM,CAAEC,OAAO,IAAKA,OAAO,CAACZ,QAAQ,KAAKA,QAAQ,CAAC;IAC3F,IAAI,CAACa,gBAAgB,GAAGb,QAAQ;IAChC,IAAIA,QAAQ,KAAK,GAAG,EAAE;MACpB;MACA,IAAI,CAACS,gBAAgB,GAAG,IAAI,CAACC,WAAW;KACzC,MAAM;MACL;MACA,IAAI,CAACD,gBAAgB,GAAG,IAAI,CAACC,WAAW,CAACC,MAAM,CAACC,OAAO,IAAIA,OAAO,CAACZ,QAAQ,KAAKA,QAAQ,CAAC;;EAE7F;EAEA;EAEAO,YAAY;IACV,IAAI,CAACR,cAAc,CAACe,cAAc,EAAE,CAACC,SAAS,CAAEC,QAAQ,IAAI;MAC1D,IAAI,CAACN,WAAW,GAAGM,QAAiB,CAAC,CAAC;MACtC;MACA,IAAI,CAACP,gBAAgB,GAAG,IAAI,CAACC,WAAW;IAC1C,CAAC,CAAC;EACJ;EAEA;EAEAO,UAAU;IACR;IACA,IAAI,CAAClB,cAAc,CAACmB,WAAW,CAAC,IAAI,CAACC,UAAU,CAAC,CAACJ,SAAS,CACxD,MAAK;MACHK,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC;MAC9C,IAAI,CAACC,cAAc,GAAG,iCAAiC;MACvD,IAAI,CAACC,YAAY,GAAG,EAAE,CAAC,CAAC;MACxB,IAAI,CAACJ,UAAU,GAAG,EAAE,CAAC,CAAC;MACtB,IAAI,CAACZ,YAAY,EAAE,CAAC,CAAC;IACvB,CAAC,EACAiB,KAAK,IAAI;MACRJ,OAAO,CAACI,KAAK,CAAC,4BAA4B,EAAEA,KAAK,CAAC;MAClD,IAAI,CAACF,cAAc,GAAG,EAAE,CAAC,CAAC;MAC1B,IAAI,CAACC,YAAY,GAAG,+BAA+B;IACrD,CAAC,CACF;EACH;EAEA;EAEAE,uBAAuB,CAACb,OAAY;IAClC,IAAI,CAACc,gBAAgB,GAAGd,OAAO;IAC/B,IAAI,CAACe,QAAQ,GAAG,IAAI,CAAC7B,YAAY,CAAC8B,IAAI,CAAC,IAAI,CAACC,kBAAkB,CAAC;EACjE;EAEAC,wBAAwB;IACtB,IAAI,CAACH,QAAQ,EAAEI,IAAI,EAAE;EACvB;EAEA;EAEAC,gBAAgB,CAACC,YAAoB;IACnC,IAAI,CAACC,eAAe,GAAG,KAAK;IAC5B,IAAI,CAACP,QAAQ,GAAG,IAAI,CAAC7B,YAAY,CAAC8B,IAAI,CAAC,IAAI,CAACO,qBAAqB,CAAC;EACpE;EAEA;EAEAC,uBAAuB,CAACH,YAAoB;IAC1C,IAAI,CAACI,KAAK,GAAG,kBAAkB;IAC/B,IAAI,CAACV,QAAQ,GAAG,IAAI,CAAC7B,YAAY,CAAC8B,IAAI,CAAC,IAAI,CAACU,mBAAmB,CAAC;EAClE;EAEAC,kBAAkB,CAACC,SAAiB;IAClC,IAAI,CAACC,iBAAiB,GAAGD,SAAS;IAClC,IAAI,CAACE,2BAA2B,GAAG,KAAK;EAC1C;EAEAC,aAAa,CAACH,SAAiB;IAC7B,IAAI,CAACzC,cAAc,CAAC6C,cAAc,CAACJ,SAAS,CAAC,CAACzB,SAAS,CACrD,MAAK;MACHK,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAC;MAC5C,IAAI,CAACd,YAAY,EAAE,CAAC,CAAC;MACrB,IAAI,CAACmC,2BAA2B,GAAG,KAAK,CAAC,CAAC;MAC1C,IAAI,CAACpB,cAAc,GAAG,+BAA+B;MACrD,IAAI,CAACC,YAAY,GAAG,EAAE,CAAC,CAAC;IAC1B,CAAC,EACAC,KAAK,IAAI;MACRJ,OAAO,CAACI,KAAK,CAAC,0BAA0B,EAAEA,KAAK,CAAC;MAChD,IAAI,CAACkB,2BAA2B,GAAG,KAAK,CAAC,CAAC;MAC1C,IAAI,CAACpB,cAAc,GAAG,EAAE,CAAC,CAAC;MAC1B,IAAI,CAACC,YAAY,GAAG,6BAA6B;IACnD,CAAC,CACF;IACD,IAAI,CAACkB,iBAAiB,GAAGD,SAAS;IAClC,IAAI,CAACE,2BAA2B,GAAG,IAAI;EACzC;EAEAG,kBAAkB,CAACC,KAAU;IAC3B,IAAIA,KAAK,CAACC,MAAM,CAACC,KAAK,IAAIF,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,EAAE;MAC/C,MAAMC,MAAM,GAAG,IAAIC,UAAU,EAAE;MAC/BD,MAAM,CAACE,MAAM,GAAIC,CAAM,IAAI;QACzB,IAAI,CAACjC,UAAU,CAACf,IAAI,GAAGgD,CAAC,CAACL,MAAM,CAACM,MAAM;MACxC,CAAC;MACDJ,MAAM,CAACK,aAAa,CAACR,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC,CAAC,CAAC,CAAC;;EAE/C;EAEAO,YAAY;IACV,IAAI,CAACd,iBAAiB,GAAGe,SAAS,CAAC,CAAC;IACpC,IAAI,CAACd,2BAA2B,GAAG,KAAK,CAAC,CAAC;EAC5C;;;AA5IW9C,iBAAiB;mBAAjBA,iBAAiB;AAAA;AAAjBA,iBAAiB;QAAjBA,iBAAiB;EAAA6D;EAAAC;IAAA;;;;;;;;;;;;;;;;;MCR9BC,yBAEM","names":["ProductsComponent","constructor","modalService","ProductService","category","name","content","price","file","user_id","ngOnInit","loadProducts","filterProducts","filteredProducts","allProducts","filter","product","selectedCategory","getAllProducts","subscribe","products","addProduct","addProducts","newProduct","console","log","successMessage","errorMessage","error","abrirmodalEditarProduto","produtoDetalhado","modalRef","show","modalEditarProduto","fecharmodalEditarProduto","hide","adicionarProduto","buttonNumber","cancelarClicado","modalAdicionarProduct","confirmarDeletarProduto","title","modalDeletarProduto","modalDeleteProduct","productId","productToDeleteId","showDeleteConfirmationModal","deleteProduct","deleteProducts","updateImagePreview","event","target","files","reader","FileReader","onload","e","result","readAsDataURL","cancelDelete","undefined","selectors","viewQuery","i0"],"sourceRoot":"","sources":["C:\\Users\\gumal\\OneDrive\\Área de Trabalho\\malimpensa\\web\\src\\app\\pages\\admin\\products\\products.component.ts","C:\\Users\\gumal\\OneDrive\\Área de Trabalho\\malimpensa\\web\\src\\app\\pages\\admin\\products\\products.component.html"],"sourcesContent":["import { Component, ViewChild, ElementRef } from '@angular/core';\r\nimport { BsModalService, BsModalRef } from 'ngx-bootstrap/modal';\r\nimport { ProductService } from 'src/app/services/product.service';\r\n\r\n@Component({\r\n  selector: 'app-products',\r\n  templateUrl: './products.component.html',\r\n  styleUrls: ['./products.component.css']\r\n})\r\n\r\nexport class ProductsComponent {\r\n  categories: string[] = ['bolo_pote', 'cone_trufado', 'bolo', 'pudim'];\r\n  filteredProducts:  any[] = [];\r\n  allProducts: any[] = []; \r\n  selectedCategory: string = '*';\r\n  cancelarClicado: boolean = false;\r\n  modalRef?: BsModalRef;\r\n  title: string = '';\r\n  produtoDetalhado: any;\r\n  successMessage: string = '';\r\n  errorMessage: string = '';\r\n  productToDeleteId: number | undefined;\r\n  showDeleteConfirmationModal = false;\r\n\r\n  newProduct: any = {\r\n    category: '',\r\n    name: '',\r\n    content: '',\r\n    price: '',\r\n    file: '',\r\n    user_id: '1',\r\n  };\r\n\r\n  constructor(\r\n    private modalService: BsModalService,\r\n    private ProductService: ProductService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.loadProducts();\r\n  }\r\n\r\n  //filtrar por pesquisa\r\n\r\n  filterProducts(category: string) {\r\n    // Filtrar produtos com base na categoria selecionada\r\n    this.filteredProducts = this.allProducts.filter((product) => product.category === category);\r\n    this.selectedCategory = category;\r\n    if (category === '*') {\r\n      // Se a categoria for '*' (Todos), não aplique nenhum filtro\r\n      this.filteredProducts = this.allProducts;\r\n    } else {\r\n      // Caso contrário, filtre os produtos com base na categoria selecionada\r\n      this.filteredProducts = this.allProducts.filter(product => product.category === category);\r\n    }\r\n  }\r\n\r\n  //Carregando produtos\r\n\r\n  loadProducts() {\r\n    this.ProductService.getAllProducts().subscribe((products) => {\r\n      this.allProducts = products as any[]; // Forçar a tipagem para um array\r\n      // Inicialmente, exiba todos os produtos\r\n      this.filteredProducts = this.allProducts;\r\n    });\r\n  }\r\n\r\n  //Adicionar Produto\r\n\r\n  addProduct() {\r\n    // Certifique-se de que this.newProduct contém as informações do produto\r\n    this.ProductService.addProducts(this.newProduct).subscribe(\r\n      () => {\r\n        console.log('Produto adicionado com sucesso.');\r\n        this.successMessage = 'Produto cadastrado com sucesso!';\r\n        this.errorMessage = ''; // Limpar a mensagem de erro, se houver\r\n        this.newProduct = {}; // Limpar o objeto newProduct\r\n        this.loadProducts(); // Recarregar a lista de produtos\r\n      },\r\n      (error) => {\r\n        console.error('Erro ao adicionar produto:', error);\r\n        this.successMessage = ''; // Limpar a mensagem de sucesso, se houver\r\n        this.errorMessage = 'Falha ao cadastrar o produto.';\r\n      }\r\n    );\r\n  }\r\n\r\n  //modal para editar o produto\r\n\r\n  abrirmodalEditarProduto(product: any) {\r\n    this.produtoDetalhado = product;\r\n    this.modalRef = this.modalService.show(this.modalEditarProduto);\r\n  }\r\n  \r\n  fecharmodalEditarProduto() {\r\n    this.modalRef?.hide();\r\n  }\r\n\r\n  //modal adicionar produto\r\n  \r\n  adicionarProduto(buttonNumber: number) {\r\n    this.cancelarClicado = false;\r\n    this.modalRef = this.modalService.show(this.modalAdicionarProduct);\r\n  }\r\n\r\n  //modal confirmar deletar produto\r\n\r\n  confirmarDeletarProduto(buttonNumber: number) {\r\n    this.title = `Excluir Produto?`;\r\n    this.modalRef = this.modalService.show(this.modalDeletarProduto);\r\n  }\r\n\r\n  modalDeleteProduct(productId: number) {\r\n    this.productToDeleteId = productId;\r\n    this.showDeleteConfirmationModal = false;\r\n  }\r\n\r\n  deleteProduct(productId: number) {\r\n    this.ProductService.deleteProducts(productId).subscribe(\r\n      () => {\r\n        console.log('Produto excluído com sucesso.');\r\n        this.loadProducts(); // Recarregar a lista de produtos após a exclusão\r\n        this.showDeleteConfirmationModal = false; // Fechar o modal após a exclusão\r\n        this.successMessage = 'Produto excluído com sucesso!';\r\n        this.errorMessage = ''; // Limpar a mensagem de erro, se houver\r\n      },\r\n      (error) => {\r\n        console.error('Erro ao excluir produto:', error);\r\n        this.showDeleteConfirmationModal = false; // Fechar o modal em caso de erro\r\n        this.successMessage = ''; // Limpar a mensagem de sucesso, se houver\r\n        this.errorMessage = 'Falha ao excluir o produto.';\r\n      }\r\n    );\r\n    this.productToDeleteId = productId;\r\n    this.showDeleteConfirmationModal = true;\r\n  }\r\n\r\n  updateImagePreview(event: any) {\r\n    if (event.target.files && event.target.files[0]) {\r\n      const reader = new FileReader();\r\n      reader.onload = (e: any) => {\r\n        this.newProduct.file = e.target.result;\r\n      };\r\n      reader.readAsDataURL(event.target.files[0]);\r\n    }\r\n  }\r\n\r\n  cancelDelete() {\r\n    this.productToDeleteId = undefined; // Limpar o ID do produto a ser excluído\r\n    this.showDeleteConfirmationModal = false; // Fechar o modal\r\n  }\r\n  \r\n  @ViewChild('modalAdicionarProduct') modalAdicionarProduct!: ElementRef;\r\n  @ViewChild('modalEditarProduto') modalEditarProduto!: ElementRef;\r\n  @ViewChild('modalDeletarProduto') modalDeletarProduto!: ElementRef;\r\n}\r\n","<!-- Seu HTML para o componente de produtos, incluindo modais -->\r\n\r\n<div class=\"container\">\r\n  <!-- Conteúdo da página de produtos -->\r\n</div>\r\n\r\n<!-- Modal Adicionar Produto -->\r\n<div #modalAdicionarProduct class=\"modal fade\">\r\n  <!-- Conteúdo do modal Adicionar Produto -->\r\n</div>\r\n\r\n<!-- Modal Editar Produto -->\r\n<div #modalEditarProduto class=\"modal fade\">\r\n  <!-- Conteúdo do modal Editar Produto -->\r\n</div>\r\n\r\n<!-- Modal Deletar Produto -->\r\n<div #modalDeletarProduto class=\"modal fade\">\r\n  <!-- Conteúdo do modal Deletar Produto -->\r\n</div>\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}