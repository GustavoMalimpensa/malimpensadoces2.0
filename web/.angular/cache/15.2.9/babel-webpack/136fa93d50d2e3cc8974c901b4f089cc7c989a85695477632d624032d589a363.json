{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"ngx-bootstrap/modal\";\nimport * as i2 from \"src/services/ProductService\";\nimport * as i3 from \"@angular/common\";\nconst _c0 = [\"modalTemplate\"];\nfunction ProductsComponent_li_6_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"li\", 8);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementStart(2, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function ProductsComponent_li_6_Template_button_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r7);\n      const product_r5 = restoredCtx.$implicit;\n      const ctx_r6 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r6.deleteProduct(product_r5.id));\n    });\n    i0.ɵɵtext(3, \" Excluir \");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const product_r5 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", product_r5.name, \" \");\n  }\n}\nfunction ProductsComponent_ng_template_7_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 10)(1, \"h4\", 11);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function ProductsComponent_ng_template_7_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r8.modalRef == null ? null : ctx_r8.modalRef.hide());\n    });\n    i0.ɵɵelementStart(4, \"span\", 13);\n    i0.ɵɵtext(5, \"\\u00D7\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(6, \"div\", 14);\n    i0.ɵɵelement(7, \"form\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 15)(9, \"button\", 16);\n    i0.ɵɵlistener(\"click\", function ProductsComponent_ng_template_7_Template_button_click_9_listener() {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.modalRef == null ? null : ctx_r10.modalRef.hide());\n    });\n    i0.ɵɵtext(10, \"Cancelar\");\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r2.title);\n  }\n}\nfunction ProductsComponent_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 17);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r3.successMessage, \"\\n\");\n  }\n}\nfunction ProductsComponent_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 18);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r4.errorMessage, \"\\n\");\n  }\n}\nexport class ProductsComponent {\n  constructor(modalService, ProductService // Injete o serviço aqui\n  ) {\n    this.modalService = modalService;\n    this.ProductService = ProductService;\n    this.products = [];\n    this.newProduct = {\n      name: ''\n    };\n  }\n  ngOnInit() {\n    this.loadProducts();\n  }\n  loadProducts() {\n    this.productService.getAllProducts().subscribe(products => {\n      this.products = products;\n    }, error => {\n      console.error('Erro ao carregar produtos:', error);\n    });\n  }\n  addProduct() {\n    if (!this.newProduct.name) {\n      alert('Por favor, insira o nome do produto.');\n      return;\n    }\n    this.productService.addProducts(this.newProduct).subscribe(response => {\n      console.log('Produto adicionado com sucesso:', response);\n      this.newProduct.name = ''; // Limpar o campo de entrada\n      this.loadProducts(); // Recarregar a lista de produtos\n    }, error => {\n      console.error('Erro ao adicionar produto:', error);\n    });\n  }\n  deleteProduct(productId) {\n    this.productService.deleteAProduct(productId).subscribe(() => {\n      console.log('Produto excluído com sucesso.');\n      this.loadProducts(); // Recarregar a lista de produtos após a exclusão\n    }, error => {\n      console.error('Erro ao excluir produto:', error);\n    });\n  }\n  openModal(buttonNumber) {\n    this.title = `Comprar produtos`;\n    this.modalRef = this.modalService.show(this.modalTemplate);\n  }\n}\nProductsComponent.ɵfac = function ProductsComponent_Factory(t) {\n  return new (t || ProductsComponent)(i0.ɵɵdirectiveInject(i1.BsModalService), i0.ɵɵdirectiveInject(i2.ProductService));\n};\nProductsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProductsComponent,\n  selectors: [[\"app-products\"]],\n  viewQuery: function ProductsComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.modalTemplate = _t.first);\n    }\n  },\n  decls: 11,\n  vars: 3,\n  consts: [[1, \"container\", \"mt-5\"], [1, \"row\", \"mt-3\"], [1, \"col-md-6\"], [1, \"list-group\"], [\"class\", \"list-group-item d-flex justify-content-between align-items-center\", 4, \"ngFor\", \"ngForOf\"], [\"modalTemplate\", \"\"], [\"class\", \"alert alert-success\", 4, \"ngIf\"], [\"class\", \"alert alert-danger\", 4, \"ngIf\"], [1, \"list-group-item\", \"d-flex\", \"justify-content-between\", \"align-items-center\"], [1, \"btn\", \"btn-danger\", \"btn-sm\", 3, \"click\"], [1, \"modal-header\", \"bg-primary\", \"text-white\"], [1, \"modal-title\", \"pull-left\"], [\"type\", \"button\", \"aria-label\", \"Close\", 1, \"btn-close\", \"close\", \"pull-right\", 3, \"click\"], [\"aria-hidden\", \"true\", 1, \"visually-hidden\"], [1, \"modal-body\"], [1, \"modal-footer\"], [\"type\", \"button\", 1, \"btn\", \"btn-secondary\", 3, \"click\"], [1, \"alert\", \"alert-success\"], [1, \"alert\", \"alert-danger\"]],\n  template: function ProductsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\");\n      i0.ɵɵtext(2, \"Lista de Produtos\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"div\", 1)(4, \"div\", 2)(5, \"ul\", 3);\n      i0.ɵɵtemplate(6, ProductsComponent_li_6_Template, 4, 1, \"li\", 4);\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(7, ProductsComponent_ng_template_7_Template, 11, 1, \"ng-template\", null, 5, i0.ɵɵtemplateRefExtractor);\n      i0.ɵɵtemplate(9, ProductsComponent_div_9_Template, 2, 1, \"div\", 6);\n      i0.ɵɵtemplate(10, ProductsComponent_div_10_Template, 2, 1, \"div\", 7);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngForOf\", ctx.products);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.successMessage);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.errorMessage);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf],\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","ctx_r8","ctx_r10","ProductsComponent","constructor","modalService","ProductService","name","ngOnInit","loadProducts","productService","getAllProducts","subscribe","products","error","console","addProduct","newProduct","alert","addProducts","response","log","deleteProduct","productId","deleteAProduct","openModal","buttonNumber","title","modalRef","show","modalTemplate","selectors","viewQuery"],"sourceRoot":"","sources":["C:\\Users\\gumal\\OneDrive\\Área de Trabalho\\malimpens2.0\\web\\src\\app\\admin\\products\\products.component.html","C:\\Users\\gumal\\OneDrive\\Área de Trabalho\\malimpens2.0\\web\\src\\app\\admin\\products\\products.component.ts"],"sourcesContent":["<div class=\"container mt-5\">\r\n    <h1>Lista de Produtos</h1>\r\n  \r\n    <!-- Lista de Produtos -->\r\n    <div class=\"row mt-3\">\r\n      <div class=\"col-md-6\">\r\n        <ul class=\"list-group\">\r\n          <li\r\n            class=\"list-group-item d-flex justify-content-between align-items-center\"\r\n            *ngFor=\"let product of products\"\r\n          >\r\n            {{ product.name }}\r\n            <button\r\n              class=\"btn btn-danger btn-sm\"\r\n              (click)=\"deleteProduct(product.id)\"\r\n            >\r\n              Excluir\r\n            </button>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n\r\n\r\n<ng-template #modalTemplate>\r\n    <div class=\"modal-header bg-primary text-white\">\r\n      <h4 class=\"modal-title pull-left\">{{ title }}</h4>\r\n      <button type=\"button\" class=\"btn-close close pull-right\" aria-label=\"Close\" (click)=\"modalRef?.hide()\">\r\n        <span aria-hidden=\"true\" class=\"visually-hidden\">&times;</span>\r\n      </button>\r\n    </div>\r\n    <div class=\"modal-body\">\r\n      <!-- Formulário para preencher os campos do comprar -->\r\n      <form>\r\n        \r\n      </form>\r\n    </div>\r\n    <div class=\"modal-footer\">\r\n      <button type=\"button\" class=\"btn btn-secondary\" (click)=\"modalRef?.hide()\">Cancelar</button>\r\n    </div>\r\n</ng-template>\r\n\r\n<div class=\"alert alert-success\" *ngIf=\"successMessage\">\r\n    {{ successMessage }}\r\n</div>\r\n  \r\n<div class=\"alert alert-danger\" *ngIf=\"errorMessage\">\r\n    {{ errorMessage }}\r\n</div>","import { Component, ViewChild } from '@angular/core';\nimport { BsModalService, BsModalRef } from 'ngx-bootstrap/modal';\nimport { ProductService } from 'src/services/ProductService';\n\n@Component({\n  selector: 'app-products',\n  templateUrl: './products.component.html',\n  styleUrls: ['./products.component.css']\n})\nexport class ProductsComponent {\n  products: any[] = [];\n  newProduct: any = {\n    name: ''\n  };\n  modalRef?: BsModalRef;\n  \n  constructor(\n    private modalService: BsModalService,\n    private ProductService: ProductService // Injete o serviço aqui\n  ) {}\n  \n  ngOnInit(): void {\n    this.loadProducts();\n  }\n\n  loadProducts() {\n    this.productService.getAllProducts().subscribe(\n      (products: any[]) => {\n        this.products = products;\n      },\n      (error) => {\n        console.error('Erro ao carregar produtos:', error);\n      }\n    );\n  }\n\n  addProduct() {\n    if (!this.newProduct.name) {\n      alert('Por favor, insira o nome do produto.');\n      return;\n    }\n\n    this.productService.addProducts(this.newProduct).subscribe(\n      (response) => {\n        console.log('Produto adicionado com sucesso:', response);\n        this.newProduct.name = ''; // Limpar o campo de entrada\n        this.loadProducts(); // Recarregar a lista de produtos\n      },\n      (error) => {\n        console.error('Erro ao adicionar produto:', error);\n      }\n    );\n  }\n\n  deleteProduct(productId: number) {\n    this.productService.deleteAProduct(productId).subscribe(\n      () => {\n        console.log('Produto excluído com sucesso.');\n        this.loadProducts(); // Recarregar a lista de produtos após a exclusão\n      },\n      (error) => {\n        console.error('Erro ao excluir produto:', error);\n      }\n    );\n  }\n\n  openModal(buttonNumber: number) {\n    this.title = `Comprar produtos`;\n    this.modalRef = this.modalService.show(this.modalTemplate);\n  }\n\n  @ViewChild('modalTemplate') modalTemplate!: string;\n\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}