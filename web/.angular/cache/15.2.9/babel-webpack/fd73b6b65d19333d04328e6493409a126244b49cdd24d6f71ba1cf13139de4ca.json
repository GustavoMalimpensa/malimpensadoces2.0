{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, ViewChild } from '@angular/core';\nlet ProductsComponent = class ProductsComponent {\n  constructor(modalService, carrinhoService, router) {\n    this.modalService = modalService;\n    this.carrinhoService = carrinhoService;\n    this.router = router;\n    this.categories = ['bolo', 'cone_trufado', 'bolo_pote'];\n    this.filteredProducts = [];\n    this.selectedCategory = '*';\n    this.precoTotal = 0;\n    this.itenTotal = 0;\n    this.cancelarClicado = false;\n    this.carrinho = [];\n    this.title = 'Título Padrão';\n    this.allProducts = [{\n      id: 1,\n      category: 'bolo',\n      name: 'Bolo de Morango',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolodedepote.jpeg',\n      price: 12\n    }, {\n      id: 2,\n      category: 'trufa',\n      name: 'Trufa Recheada',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolofatia.jpeg',\n      price: 15\n    }, {\n      id: 3,\n      category: 'bolo_pote',\n      name: 'Bolo com uva',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/cone.jpeg',\n      price: 16\n    }, {\n      id: 4,\n      category: 'cone_trufado',\n      name: 'Bolo de Morango',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolodedepote.jpeg',\n      price: 12\n    }, {\n      id: 5,\n      category: 'bolo',\n      name: 'Trufa Recheada',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolofatia.jpeg',\n      price: 15\n    }, {\n      id: 6,\n      category: 'cone_trufado',\n      name: 'Bolo com uva',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/cone.jpeg',\n      price: 16\n    }\n    // Adicione outros produtos fictícios aqui\n    ];\n\n    this.carrinho = []; // Inicialize a variável carrinho aqui\n  }\n\n  ngOnInit() {\n    this.loadProducts();\n  }\n  filterProducts(category) {\n    this.selectedCategory = category;\n    this.filteredProducts = category === '*' ? this.allProducts : this.allProducts.filter(product => product.category === category);\n  }\n  loadProducts() {\n    // Inicialmente, exiba todos os produtos\n    this.filteredProducts = this.allProducts;\n  }\n  openModal(buttonNumber) {\n    this.title = 'Comprar produtos';\n    this.cancelarClicado = false;\n    this.modalRef = this.modalService.show(this.modalTemplate);\n  }\n  adicionarAoCarrinho(product) {\n    const itemNoCarrinho = this.getCarrinhoItem(product);\n    if (itemNoCarrinho) {\n      itemNoCarrinho.quantidade++;\n    } else {\n      const newItem = {\n        ...product,\n        quantidade: 1\n      };\n      this.carrinho.push(newItem);\n    }\n    this.itenTotal = this.calcularItenTotal();\n    this.precoTotal = this.calcularPrecoTotal();\n    this.carrinhoService.adicionarProdutoAoCarrinho(product);\n  }\n  removerDoCarrinho(item) {\n    if (item.quantidade === 1) {\n      const index = this.carrinho.findIndex(i => i.id === item.id);\n      if (index !== -1) {\n        this.carrinho.splice(index, 1);\n      }\n    } else {\n      item.quantidade--;\n    }\n    this.itenTotal = this.calcularItenTotal();\n    this.precoTotal = this.calcularPrecoTotal();\n  }\n  limparCarrinho() {\n    this.carrinho = [];\n  }\n  calcularItenTotal() {\n    return this.carrinho.reduce((total, item) => total + item.quantidade, 0);\n  }\n  calcularPrecoTotal() {\n    return this.carrinho.reduce((total, item) => total + item.price * item.quantidade, 0);\n  }\n  getCarrinhoItem(product) {\n    return this.carrinho.find(item => item.id === product.id);\n  }\n  estaNoCarrinho(product) {\n    return this.carrinho.some(item => item.id === product.id);\n  }\n  finalizarCompra() {\n    this.modalRef?.hide();\n    this.router.navigate(['/pedido']);\n  }\n};\n__decorate([ViewChild('modalTemplate')], ProductsComponent.prototype, \"modalTemplate\", void 0);\nProductsComponent = __decorate([Component({\n  selector: 'app-products',\n  templateUrl: './products.component.html',\n  styleUrls: ['./products.component.css']\n})], ProductsComponent);\nexport { ProductsComponent };","map":{"version":3,"mappings":"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","names":["Component","ViewChild","ProductsComponent","constructor","modalService","carrinhoService","router","id","category","name","description","imageUrl","price","carrinho","ngOnInit","loadProducts","filterProducts","selectedCategory","filteredProducts","allProducts","filter","product","openModal","buttonNumber","title","cancelarClicado","modalRef","show","modalTemplate","adicionarAoCarrinho","itemNoCarrinho","getCarrinhoItem","quantidade","newItem","push","itenTotal","calcularItenTotal","precoTotal","calcularPrecoTotal","adicionarProdutoAoCarrinho","removerDoCarrinho","item","index","findIndex","i","splice","limparCarrinho","reduce","total","find","estaNoCarrinho","some","finalizarCompra","hide","navigate","__decorate","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["C:\\Users\\gumal\\OneDrive\\Área de Trabalho\\malimpensa\\src\\app\\user\\products\\products.component.ts"],"sourcesContent":["import { Component, ViewChild } from '@angular/core';\nimport { BsModalService, BsModalRef } from 'ngx-bootstrap/modal';\nimport { CarrinhoService } from '../../services/carrinho.service';\nimport { Product } from 'src/app/models/product';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-products',\n  templateUrl: './products.component.html',\n  styleUrls: ['./products.component.css']\n})\nexport class ProductsComponent {\n\n  categories: string[] = ['bolo', 'cone_trufado', 'bolo_pote'];\n  filteredProducts: Product[] = [];\n  selectedCategory: string = '*';\n  precoTotal: number = 0;\n  itenTotal: number = 0;\n  cancelarClicado: boolean = false;\n  carrinho: any[] = [];\n  modalRef?: BsModalRef;\n  title: string = 'Título Padrão';\n\n  allProducts: Product[] = [\n    {\n      id: 1,\n      category: 'bolo',\n      name: 'Bolo de Morango',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolodedepote.jpeg',\n      price: 12,\n    },\n    {\n      id: 2,\n      category: 'trufa',\n      name: 'Trufa Recheada',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolofatia.jpeg',\n      price: 15,\n    },\n    {\n      id: 3,\n      category: 'bolo_pote',\n      name: 'Bolo com uva',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/cone.jpeg',\n      price: 16,\n    },\n    {\n      id: 4,\n      category: 'cone_trufado',\n      name: 'Bolo de Morango',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolodedepote.jpeg',\n      price: 12,\n    },\n    {\n      id: 5,\n      category: 'bolo',\n      name: 'Trufa Recheada',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/bolofatia.jpeg',\n      price: 15,\n    },\n    {\n      id: 6,\n      category: 'cone_trufado',\n      name: 'Bolo com uva',\n      description: 'Bolo com pedaços de morango',\n      imageUrl: './assets/img/cone.jpeg',\n      price: 16,\n    },\n    // Adicione outros produtos fictícios aqui\n  ];\n  \n\n  constructor(\n    private modalService: BsModalService,\n    private carrinhoService: CarrinhoService,\n    private router: Router,\n  ) {\n    this.carrinho = []; // Inicialize a variável carrinho aqui\n  }\n\n  ngOnInit(): void {\n    this.loadProducts();\n  }\n\n  filterProducts(category: string) {\n    this.selectedCategory = category;\n    this.filteredProducts = category === '*' ?\n      this.allProducts :\n      this.allProducts.filter(product => product.category === category);\n  }\n\n  loadProducts() {\n    // Inicialmente, exiba todos os produtos\n    this.filteredProducts = this.allProducts;\n  }\n  \n  openModal(buttonNumber: number) {\n    this.title = 'Comprar produtos';\n    this.cancelarClicado = false;\n    this.modalRef = this.modalService.show(this.modalTemplate);\n  }\n\n  adicionarAoCarrinho(product: Product) {\n    const itemNoCarrinho = this.getCarrinhoItem(product);\n  \n    if (itemNoCarrinho) {\n      itemNoCarrinho.quantidade++;\n    } else {\n      const newItem = { ...product, quantidade: 1 };\n      this.carrinho.push(newItem);\n    }\n  \n    this.itenTotal = this.calcularItenTotal();\n    this.precoTotal = this.calcularPrecoTotal();\n    this.carrinhoService.adicionarProdutoAoCarrinho(product);\n  }\n  \n  removerDoCarrinho(item: any) {\n    if (item.quantidade === 1) {\n      const index = this.carrinho.findIndex((i) => i.id === item.id);\n      if (index !== -1) {\n        this.carrinho.splice(index, 1);\n      }\n    } else {\n      item.quantidade--;\n    }\n  \n    this.itenTotal = this.calcularItenTotal();\n    this.precoTotal = this.calcularPrecoTotal();\n  }\n\n  limparCarrinho() {\n    this.carrinho = [];\n  }\n  \n  calcularItenTotal(): number {\n    return this.carrinho.reduce((total, item) => total + item.quantidade, 0);\n  }\n\n  calcularPrecoTotal(): number {\n    return this.carrinho.reduce((total, item) => total + item.price * item.quantidade, 0);\n  }\n\n  getCarrinhoItem(product: Product) {\n    return this.carrinho.find((item) => item.id === product.id);\n  }\n\n  estaNoCarrinho(product: Product): boolean {\n    return this.carrinho.some((item) => item.id === product.id);\n  }\n\n  finalizarCompra() {\n    this.modalRef?.hide();\n    this.router.navigate(['/pedido']);\n  }\n  \n  @ViewChild('modalTemplate') modalTemplate!: string;\n  \n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n  "]},"metadata":{},"sourceType":"module","externalDependencies":[]}